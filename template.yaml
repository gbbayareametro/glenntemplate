# yaml-language-server: $schema=https://json.schemastore.org/none
apiVersion: scaffolder.backstage.io/v1beta3
kind: Template
metadata:
  name: glennstemplate-clone
  title: Clone Glenn's GitHub Template
  description: Clones the glennstemplate repo from gbayareametro
  tags:
    - github
    - template
    - clone
spec:
  owner: user:glennbrown
  type: website
  parameters:
    - title: Repository Name
      description: Name for the new repository
      required:
        - repoName
      properties:
        repoName:
          title: Repo Name
          type: string
          description: Git Repository Name

    - title: Description
      description: Short description of the new repository
      type: string
      name: description
  steps:
    - id: fetch-template
      name: Fetch Glenn's Template
      action: fetch:template
      input:
        url: https://github.com/gbayareametro/glennstemplate
        targetPath: .
        values:
          repoName: ${{ parameters.repoName }}
          description: ${{ parameters.description }}
    - id: publish
      name: Publish to GitHub
      action: publish:github
      input:
        repoUrl: github.com/gbayareametro/${{ parameters.repoName }}
        repoVisibility: public
        description: ${{ parameters.description }}
        defaultBranch: main
        protectDefaultBranch: true